<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Accounts — My To-Do List</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* remove large top padding and stopped using fixed-position container
    */
    body {
      font-family: "Poppins", sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      background: url("{{ url_for('static', filename='account.png') }}") no-repeat center center fixed;
      background-size: cover;
      color: #000;
      /* small top gap only*/
      padding-top: 18px;
    }

    /* from fixed to normal centered card 
    */
    .container {
      /* removed: position: fixed; margin-top; margin-left; */
      width: 920px;
      max-width: calc(100% - 32px);
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      display: flex;
      gap: 20px;
      align-items: flex-start;
      /* allow container to flow with page*/
    }

    /*
       Circular placeholder for user picture.
    */
    .profile-pic {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: #eee url("https://cdn-icons-png.flaticon.com/512/847/847969.png") center/cover no-repeat;
      flex: 0 0 120px;
      border: 2px solid rgba(0,0,0,0.06);
    }

    /* info right part
    */
    .info-wrap {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .info {
      padding: 6px 0;
      text-align: left; /* labels left */
    }

    .info p {
      margin: 6px 0;
      font-size: 1.05rem;
      color: #000000;
    }

    .info strong {
      color: #555;
      margin-right: 6px;
      min-width: 90px;
      display: inline-block;
      font-weight: 700;
    }

    .info .value {
      color: rgba(0,0,0,0.8);
      font-weight: 600;
    }

    /* actions area/buttons
    */
    .actions {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }

    /* look clickable */
    .btn {
      border: none;
      border-radius: 8px;
      padding: 10px 16px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.12s;
      background: linear-gradient(135deg, #EDD5E5 0%, #D1EDF8 50%);
      color: #000;
      box-shadow: 0 6px 12px rgba(0,0,0,0.06);
    }
    .btn:hover { transform: translateY(-2px); }

    .hidden { display: none !important; }

    /* did stack vertically under 720px */
    @media (max-width: 720px) {
      .container { flex-direction: column; align-items: center; padding: 14px; }
      .profile-pic { margin-bottom: 8px; }
      .info-wrap { width: 100%; }
      .info strong { min-width: 96px; }
      .actions { justify-content: center; }
    }

    /* placed above the card*/
    #topLoginAlert {
      display: none;
      color: #7a0b0b;
      font-weight: 700;
      margin-bottom: 6px;
    }

    /*back button position */
    #backToTasksBtn {
      background-color: transparent;
      color: rgb(0, 0, 0);
      border: none;
      font-weight: 600;
      font-size: 1.05rem;
      cursor: pointer;
      margin: 8px 0;
      align-self: flex-start;
      padding-left: 8px;
    }
  </style>
</head>

<body class="accounts-page">

  <!-- Back button -->
  <button id="backToTasksBtn" onclick="location.href='/'">◀ Back to To-Do</button>

  <!--MAIN -->
  <div class="container">

    <div style="display:flex; gap:20px; align-items:flex-start; width:100%;">
      <div class="profile-pic" aria-hidden="true"></div>

      <div class="info-wrap">

        <div id="topLoginAlert"></div>

        <!-- LOGIN box -->
        <div id="loginBox" class="hidden">
          <h3>Login</h3>
          <input id="loginUsername" placeholder="Username" />
          <input id="loginPassword" type="password" placeholder="Password" />
          <div style="margin:10px 0;">
            <button id="loginBtn" class="btn" type="button">Login</button>
          </div>
          <p>
            <a href="#" id="showRegisterLink">Create an account</a> |
            <a href="#" id="showForgotLink">Forgot password?</a>
          </p>
        </div>

        <!--signup -->
        <div id="registerBox" class="hidden">
          <h3>Create Account</h3>
          <input id="regName" placeholder="Full name" />
          <input id="regUsername" placeholder="Username" />
          <input id="regPassword" type="password" placeholder="Password" />
          <input id="regPasswordConfirm" type="password" placeholder="Confirm password" />
          <div style="margin:10px 0;">
            <button id="registerBtn" class="btn">Create Account</button>
            <button id="cancelRegister" class="btn">Cancel</button>
          </div>
        </div>

        <!-- PROFILE  -->
        <div id="profileArea" class="hidden">
          <!-- Username / Name laid out as requested (labels bold then values) -->
          <div class="info">
            <p><strong>Username:</strong> <span id="meUsername" class="value">—</span></p>
            <p><strong>Name:</strong> <span id="meName" class="value">—</span></p>
          </div>

          <!-- Action buttons -->
          <div class="actions profile-actions" style="margin-top:6px;">
            <button id="editProfileBtn" class="btn">Edit Profile</button>
            <button id="saveProfileBtn" class="btn hidden">Save</button>
            <button id="cancelEditBtn" class="btn hidden">Cancel</button>

            <button id="changePasswordBtn" class="btn">Change Password</button>
            <!-- "Back to To-Do" button -->
            <button id="backInCardBtn" class="btn" onclick="location.href='/'">Back to To-Do</button>
          </div>

          <!-- Change password fields -->
          <div id="changePasswordFields" class="hidden" style="margin-top:12px;">
            <input id="currentPassword" type="password" placeholder="Current password" style="display:block; width:100%; padding:8px; border-radius:8px; border:1px solid #ccc; margin-bottom:8px;" />
            <input id="newPassword" type="password" placeholder="New password" style="display:block; width:100%; padding:8px; border-radius:8px; border:1px solid #ccc; margin-bottom:8px;" />
            <div style="display:flex; gap:8px;">
              <button id="savePasswordBtn" class="btn">Save Password</button>
              <button id="cancelPasswordBtn" class="btn">Cancel</button>
            </div>
          </div>
        </div>

        <!-- FORGOT PW-->
        <div id="forgotBox" class="hidden">
          <h3>Forgot Password</h3>
          <p style="font-size: 14px; color: #555; margin-bottom: 10px;">
            Enter your username and email below to receive the reset code.
          </p>
          <input id="forgotUsername" placeholder="Enter your username" class="input-field" />
          <input id="forgotEmail" type="email" placeholder="Enter your email below to send the reset code" class="input-field" />
          <div style="margin: 10px 0;">
            <button id="forgotBtn" type="button" class="btn">Send Reset Code</button>
          </div>
          <a href="#" id="cancelForgot" onclick="showLogin()">Back to Login</a>
        </div>

        <!-- RESET -->
        <div id="resetBox" class="hidden">
          <h3>Reset Password</h3>
          <input id="resetUsername" placeholder="Your username" class="input-field" />
          <input id="resetToken" placeholder="Reset code" class="input-field" />
          <input id="resetNewPw" type="password" placeholder="New password" class="input-field" />
          <div style="margin: 10px 0;">
            <button id="resetBtn" type="button" class="btn">Reset Password</button>
          </div>
          <a href="#" onclick="showLogin()">Back to Login</a>
        </div>

        <div style="margin-top:10px;">
          <button id="logoutBtn" class="btn hidden">Logout</button>
        </div>

      </div>
    </div>

  </div> 

  <script src="{{ url_for('static', filename='accounts.js') }}"></script>
</body>
</html>